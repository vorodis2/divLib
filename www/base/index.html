<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="divLib.js"></script>
    <script type="module">
        import {CamZI} from "./CamZI.js"

        var trace = window.console.log.bind(window.console);
        var dCont,scane,aa,dcmParam,camZI,ddCont,aaaa,wh,dCont2
        var aa=[]
        function open (url) {
            
            for(var i=0;i<aa.length;i++){
                
                if(aa[i].text==url)aa[i].alpha=0.5
                else aa[i].alpha=1

            }

            camZI.load(url)

	    }
        
        function init() {
            var otstup=2      
            var scale = 1   
            dcmParam=new DCM();
            scane= new DCont(document.body);
            dCont = new DCont(scane);
            dCont2 = new DCont(scane);
            var yy=otstup
            // aa.push(new DButton(scane,otstup,yy,"images.jpg",function(){open(this.text)}))
            // yy+=32+otstup
            // aa.push(new DButton(scane,otstup,yy,"img1.jpg",function(){open(this.text)}))
            // yy+=32+otstup
            // aa.push(new DButton(scane,otstup,yy,"0.png",function(){open(this.text)}))

            // yy+=32+otstup
            // aa.push(new DButton(scane,otstup,yy,"test-image-1.jpg",function(){open(this.text)}))
            // yy+=32+otstup
            // aa.push(new DButton(scane,otstup,yy,"test-image-2.jpg",function(){open(this.text)}))
            // yy+=32+otstup
            // aa.push(new DButton(scane,otstup,yy,"test-image-3.jpg",function(){open(this.text)}))
            // yy+=32+otstup
            // aa.push(new DButton(scane,otstup,yy,"test-image-4.jpg",function(){open(this.text)}))
            // yy+=32+otstup
            // aa.push(new DButton(scane,otstup,yy,"test-image-5.png",function(){open(this.text)}))
            // yy+=32+otstup
            // aa.push(new DButton(scane,otstup,yy,"test-image-6.jpg",function(){open(this.text)}))
            // yy+=32+otstup
            aa.push(new DButton(scane,otstup,yy,"image-good-2.png",function(){open(this.text)}))

            yy+=32+otstup
            yy+=32+otstup
            aa.push(new DButton(scane,otstup,yy,"isZI",function(){
                let b = camZI.isSI()
                trace(b)
            }))
            yy+=32+otstup
            aa.push(new DButton(scane,otstup,yy,"create",function(){
                let b = camZI.create()
                
            }))
            yy+=32+otstup
            aa.push(new DButton(scane,otstup,yy,"createTest",function(){
                let b = camZI.createTest()
            }))
            yy+=32+otstup
            
            camZI=new CamZI(function(s,p,p1){
                trace(s,p,p1);
            })
            dCont.div.appendChild(camZI.bmp.canvas);
            dCont2.div.appendChild(camZI.bmpDist.canvas);
            
            scane.add(camZI.dCont2)
            scane.add(camZI.dCont);
            camZI.debag=dddddd;

            camZI.bmp.canvas.style.position = 'fixed';
		    camZI.bmp.canvas.style.top = '0px';
            camZI.bmp.canvas.style.left = '0px';
            
            camZI.bmpDist.canvas.style.position = 'fixed';
		    camZI.bmpDist.canvas.style.top = '0px';
            camZI.bmpDist.canvas.style.left = '0px';

            dCont2.scale=scale;
            dCont2.x=200;
            dCont2.y=400;

            dCont.scale=scale;
            dCont.x=200;
            open(aa[0].text)

            init2();
        }
        function init2() {
            aaaa=[]
            
            ddCont=new DCont(scane)            
            wh=10
            ddCont.x=255
            ddCont.y=55 
            
        }
        
        function dddddd(arr) {
           
            for (let i = 0; i < aaaa.length; i++) {
                aaaa[i].visible=false
            }
            for (let i = 0; i < arr.length; i++) {
                if(aaaa[i]==undefined){
                    aaaa[i]=new DPanel(ddCont,wh*i,0)
                    aaaa[i].width=wh
                    aaaa[i].height=wh
                }
                aaaa[i].visible=true;
                let c="#"+dcmParam.compToHex(arr[i][0])+dcmParam.compToHex(arr[i][1])+dcmParam.compToHex(arr[i][2])//Math.floor(arr[i][0] / (256 * 256))//parseInt(arr[i][0], 16)//+parseInt(arr[i][1], 16)+parseInt(arr[i][2], 16)
                aaaa[i].color=c
            }
        }


        setTimeout(function(){init()},100)
    </script>
</head>
<body">  
</body>
</html>